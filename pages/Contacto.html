<!DOCTYPE html>
<html lang="en">
<style type="text/css">
    @font-face {
        font-family: 'CircularStd';
        src: url('../Fuente/CircularStd-Bold.ttf')format('truetype');
    }

    @font-face {
        font-family: 'HelveticaNeue';
        src: url('../Fuente/HelveticaNeue.ttf')format('truetype');
    }
</style>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <title>Contacto</title>
    <!-- MDB icon -->
    <link rel="icon" href="../img/mdb-favicon.ico" type="image/x-icon" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" />
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" />
    <!-- MDB -->
    <link rel="stylesheet" href="../css/mdb.min.css" />


    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <!-- <link href="../css/mdb-pro.min.css" rel="stylesheet"> -->
    <!-- Your custom styles (optional) -->
    <link href="../css/style.css" rel="stylesheet">
    <!-- <link href="../css/style.min.css" rel="stylesheet"> -->

</head>

<body class="bg-ba--">
    <!--****♡♡♡♡ MENÚ AMARILLO ♡♡♡♡****-->

    <!--Navbar-->
    <nav class="navbar navbar-expand-lg  navar-1 navar-2 justify-content-start">

        <!-- Navbar brand -->
        <button class="navbar-toggler" type="button" data-toggle="modal" data-target="#frameModalBottom">
            <span class=""><img id="myImage" onclick="changeImage()" src="../img/svg/Menu.svg">
            </span>

        </button>

        <a class="navbar-brand" href="../index.html">
            <img src="../img/svg/sprite-logo-marketplace.svg"></a>
        <!-- Collapsible content -->
        <div class="collapse navbar-collapse justify-content-end mr-5" id="basicExampleNav">
        </div>

    </nav>
    <!--/.Navbar-->
    <br>
    <form id="form-contact" action="" method="" onsubmit="">

        <div class="container mb-3">
            <!--Paginado Contacto -->
            <div class="FontCirc ">
                <label><span class="step active">1</span><span class="StylePaginadoTop HeaderBold">Contacto </span><svg
                        class="linea2Dissable"></svg></label>
                <label><span class="step">2</span><span class="StylePaginadoTop">Experiencia de venta</span><svg
                        class="linea2Dissable"></svg></label>
                <label><span class="step">3</span><span class="StylePaginadoTop">Datos Oficiales</span><svg
                        class="linea2Dissable"></svg></label>
                <label><span class="step">4</span><span class="StylePaginadoTop">Logística</span><svg
                        class="linea2Dissable"></svg></label>
                <label><span class="step">5</span><span class="StylePaginadoTop">Documentos</span></label>


            </div>

            <br>
            <div class="row m-3">
                <div class="col-lg-12 mx-auto EspacioNeg">
                    <!-- Card 1 -->
                    <div class="card">
                        <br>

                        <div class="card-bodyF">
                            <h4 class="HeaderTitleContacto"><a>Contacto</a></h4>

                            <p class="HeaderSubTitle"> Información de quién será el contacto directo con Coppel
                                Marketplace
                            </p>

                            <p class="StyleTexto">
                                * Estos datos son <b>obligatorios</b> para continuar con el proceso.
                            </p>


                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="form-outline">
                                        <input type="text" id="nombres" name="Contact[]"
                                            class="form-control ajus-contro" aria-describedby="textExample1"
                                            maxlength="50" />
                                        <label class="form-label" for="nombres">Nombre*</label>
                                    </div>
                                    <div id="textExample1" class="StyleGrisInputs">
                                        <small>Persona que será encargada de la cuenta en Coppel</small>
                                    </div>
                                </div>

                                <div class="col-md-4 mb-3">
                                    <div class="form-outline">
                                        <input type="text" id="apellidos" name="Contact[]"
                                            class="form-control ajus-contro" aria-describedby="textExample1"
                                            maxlength="100" />
                                        <label class="form-label" for="apellidos">Apellidos*</label>
                                    </div>
                                    <div id="textExample1" class="StyleGrisInputs">
                                        <small>Completa el campo</small>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="form-outline">
                                        <input type="text" id="celular" name="Contact[]"
                                            class="form-control ajus-contro onlyNumbers" aria-describedby="textExample1"
                                            maxlength="10" />
                                        <label class="form-label" for="celular">Teléfono celular*</label>
                                    </div>
                                    <div id="textExample1" class="StyleGrisInputs">
                                        <small>Escribe el número a 10 dígitos</small>
                                    </div>
                                </div>

                                <div class="col-md-4 mb-3">
                                    <div class="form-outline">
                                        <input type="text" id="correo" name="Contact[]" class="form-control ajus-contro"
                                            aria-describedby="textExample1" maxlength="100" />
                                        <label class="form-label" for="correo">Correo electrónico*</label>
                                    </div>
                                    <div id="textExample1" class="StyleGrisInputs">
                                        <small>Será el correo principal de tu cuenta en Coppel</small>
                                    </div>
                                </div>
                            </div>


                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="form-outline">
                                        <input type="text" id="nombrecomercial" name="Contact[]"
                                            class="form-control ajus-contro" aria-describedby="textExample1" />
                                        <label class="form-label" for="nombrecomercial">Nombre comercial en
                                            Coppel*</label>
                                    </div>
                                    <div id="textExample1" class="StyleGrisInputs">
                                        <small>Escribe el nombre con el que se va a mostrar el negocio</small>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="row m-3">
                <d class="col-lg-12 text-lg">
                    <div class="row">
                        <div class="col-lg-6 text-lg-left">

                            <a class="nav-link SpaceBacklink" href="./MensajeBienvenida.html"> <i
                                    class="fas fa-arrow-left roblue1"></i>
                                Regresa a Inicio</a>
                        </div>

                        <div class="col-lg-6 text-lg-right">

                            <button id="btn_Contact" type="submit"
                                class="btn btn-crearcuenta btn-primary btn-rounded waves-effect btn-right">
                                Continuar
                            </button>
                        </div>
                    </div>
                </d>
            </div>
        </div>
    </form>




    <!-- Footer -->
    <footer class="page-footer font-small bg-footer pt-4">

        <!-- Footer Text -->
        <div class="container-fluid text-center text-md-left">

            <!-- Grid row -->
            <div class="row mt-2">
                <div class="col-md-4 mt-md-0 mt-3  mx-auto text-center">
                    <a class="links-footer" href="">Quiero vender en Marketplace</a>
                </div>
                <div class="col-md-4 mt-md-0 mt-3  mx-auto text-center">
                    <a class="links-footer" href="">Términos y condiciones</a>
                </div>
                <div class="col-md-4 mt-md-0 mt-3  mx-auto text-center">
                    <a class="links-footer AvisoPfooter" href=""> Aviso de privacidad</a>
                </div>
            </div>
            <!-- Grid row -->
            <!-- Grid row -->
            <div class="row">
                <div class="col-12 mx-auto text-center mt-4">
                    <p class="text-footer">Todos los precios en Coppel.com son en pesos mexicanos e incluyen
                        impuestos.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-10 col-md-12 mx-auto text-center">
                    <p class="text-footer">
                        Los precios y promociones de nuestro sitio web son exclusivos de Coppel.com. Los abonos
                        quincenales,
                        el
                        plazo o el pago inicial pueden
                        variar según el margen de crédito y el historial de pago de cada cliente. Los
                        quincenales
                        contemplan:
                        24,
                        36, 48, 60 o 72 quincenas para
                        muebles y 16 quincenas para ropa. Los productos de Marketplace que lleves con tu crédito
                        Coppel,
                        cuentan con un plazo de 24 quincenas y son financiados con Coppel Pay.
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-12 mx-auto text-center">
                    <p class="text-footerGris">2022 © Coppel | Todos los derechos reservados</p>
                </div>
            </div>
            <!-- Grid row -->

        </div>
        <!-- Footer Text -->

    </footer>
    <!-- Footer -->





    <!-- JQuery -->


    <script type="text/javascript" src="../js/jquery-3.5.1.min.js"></script>
    <!-- Bootstrap tooltips -->
    <!-- <script type="text/javascript" src="../js/popper.min.js"></script> -->
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="../js/mdb.min.js"></script>

    <script type="text/javascript" src="../js/validate.js"></script>
    <script type="text/javascript">

        $(document).ready(function () {
            validarContacto();
            let x = document.cookie;
            console.log(x);
            checkCookie();

            $("form#form-contact").submit(function (e) {
                // Stop default form Submit.
                e.preventDefault();

                // Call Ajax Submit.
                go_Experience();
            });

            var formulario = document.getElementsByName("Contact[]");

            for (var i = 0; i < formulario.length; i++) {

                var field = formulario[i].value;

                if (field.length > 0) {

                    $(formulario[i]).addClass("active");

                } else {

                    $(formulario[i]).removeClass("active");
                }
            }
        });

        function go_Experience() {

            $.ajax({
                url: "https://test.salesforce.com/services/oauth2/token",
                method: "POST",
                timeout: 30000,
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                // data: {
                //     "grant_type": "password",
                //     "client_id": "3MVG9dzDZFnwTBRKXA8rVu5P00caW7GPdmAjcEdj8z5blPwsa4bbp4KsJ6a3qpTffeS4m.J2KSnxghcbNwcfq",
                //     "client_secret": "2756E454EA106B0E5C799DC8505A49DE6DE9371790ECD27971292FA4C5234ACE",
                //     "username": "integracion.mktp@coppel.com",
                //     "password": "MktP$7!1"
                // },
                data: {
                    "grant_type": "password",
                    "client_id": "3MVG9hrgdTdWwemeusEZYYSZzjr36YXUTjAQB2FQtA8D7l.gOidbdoBYoHR.TygZzD3l5yHkV4PXtnXhogOVe",
                    "client_secret": "019A47406C846A7066949060083E196C08B9C705F505AD57ACDDA94CAEE36883",
                    "username": "integracion.mktp@coppel.com.qa",
                    "password": "MktP$7!1"
                },
                success: function (response) {

                    console.log(response.token_type + " " + response.access_token);

                    var form_Seller = {
                        "url": "https://coppelmx--qa.my.salesforce.com/services/apexrest/FormularioSeller/",
                        "method": "POST",
                        "timeout": 30000,
                        "crossDomain": true,
                        "headers": {
                            // "Authorization": "Bearer 00D8H0000008fvH!ARkAQB07GjX2PrZC4btjImWjPyhqqG.pqdYadP7sJOwFxy_T3YQM1GF8ZrXEwq9MBS2MA3_ZsBravoHeAd0hOb2XjYY6PW.7",
                            "Authorization": response.token_type + " " + response.access_token,
                            "Content-Type": "application/json",
                            "Access-Control-Allow-Origin": "*"
                        },
                        "data": JSON.stringify({
                            "formulario": [
                                {
                                    "contacto": {
                                        "Nombre": "Miguel Angel",
                                        "Apellidos": "Chinchilla Borjas",
                                        "Email": "chinchillaklemanfamily@gmail.com",
                                        "Telefono": "7788990099"
                                    },
                                    "operacion": {
                                        "Regimen_Fiscal": "Regimen Fiscal",
                                        "Url_Tienda": "www.login.salesforce.com",
                                        "Proveedor_Coppel": true,
                                        "Categoria_Principal": "Celulares y Tablets"
                                    },
                                    "datosoficiales": {
                                        "Nombre_Completo": "Miguel Angel Chinchilla Borjas",
                                        "Fecha_Nacimiento": "2020-12-23",
                                        "Telefono_Celular": "7788990011",
                                        "Correo_Electronico": "chinchillaklemanfamily@gmail.com",
                                        "Nombre_Tienda": "La Confianza",
                                        "Razon_Social": "Venta Celulares y Tablets",
                                        "RFC_Empresa": "17588964DE",
                                        "Direccion_Fiscal": "Calle la alegria",
                                        "Codigo_Postal": "01049",
                                        "Colonia": "La amistad",
                                        "Estado": "Jalisco",
                                        "Ciudad": "Guadalajara",
                                        "Telefono_Fijo": "8900889999",
                                        "Nombre_Titular": "7788994422",
                                        "Numero_Cuenta": 123456,
                                        "Clave_Interbancaria": 77889900,
                                        "Nombre_Banco": "Banco Credomatic"
                                    },
                                    "logistica": {
                                        "Nombre": "Ana Isabel",
                                        "Apellidos": "Reyes Baca",
                                        "Telefono": "8899889900",
                                        "Telefono2": "3344558899",
                                        "Email": "ana.reyes.baca@gmail.com",
                                        "Calle": "El comercio",
                                        "Numero_Exterior": 123,
                                        "Numero_Interior": 456,
                                        "Codigo_Postal": "01048",
                                        "Colonia": "La amistad",
                                        "Estado": "Jalisco",
                                        "Ciudad": "Guadalajara"
                                    },
                                    "prospecto": {
                                        "Categoria_Principal": "Valor 1",
                                        "Clasificacion_Principal": "Negociación",
                                        "Nombre_Empresa": "LA CONFIANZA",
                                        "Proveedor_Coppel": true,
                                        "Referido_Por": "Paul Kleman",
                                        "GMV": "GMV"
                                    }
                                }
                            ]
                        }),
                    };

                    $.ajax(form_Seller).done(function (response_form) {

                        var resp = JSON.parse(response_form);
                        console.log(resp);
                        console.log(resp.rfc);

                    }).fail(function () {

                        console.log("Error: send form");
                        return false;
                    });

                    // var myHeaders = new Headers();
                    // myHeaders.append("Authorization", "Bearer 00D8H0000008fvH!ARkAQB07GjX2PrZC4btjImWjPyhqqG.pqdYadP7sJOwFxy_T3YQM1GF8ZrXEwq9MBS2MA3_ZsBravoHeAd0hOb2XjYY6PW.7");
                    // myHeaders.append("Content-Type", "application/json");
                    // myHeaders.append("Cookie", "BrowserId=UYMsRo3EEeynaVcVyipI8Q; CookieConsentPolicy=0:1; LSKey-c$CookieConsentPolicy=0:1");

                    // var raw = JSON.stringify({
                    //     "formulario": [
                    //         {
                    //             "contacto": {
                    //                 "Nombre": "Miguel Angel",
                    //                 "Apellidos": "Chinchilla Borjas",
                    //                 "Email": "chinchillaklemanfamily@gmail.com",
                    //                 "Telefono": "7788990099"
                    //             },
                    //             "operacion": {
                    //                 "Regimen_Fiscal": "Regimen Fiscal",
                    //                 "Url_Tienda": "www.login.salesforce.com",
                    //                 "Proveedor_Coppel": true,
                    //                 "Categoria_Principal": "Celulares y Tablets"
                    //             },
                    //             "datosoficiales": {
                    //                 "Nombre_Completo": "Miguel Angel Chinchilla Borjas",
                    //                 "Fecha_Nacimiento": "2020-12-23",
                    //                 "Telefono_Celular": "7788990011",
                    //                 "Correo_Electronico": "chinchillaklemanfamily@gmail.com",
                    //                 "Nombre_Tienda": "La Confianza",
                    //                 "Razon_Social": "Venta Celulares y Tablets",
                    //                 "RFC_Empresa": "17588964DE",
                    //                 "Direccion_Fiscal": "Calle la alegria",
                    //                 "Codigo_Postal": "01049",
                    //                 "Colonia": "La amistad",
                    //                 "Estado": "Jalisco",
                    //                 "Ciudad": "Guadalajara",
                    //                 "Telefono_Fijo": "8900889999",
                    //                 "Nombre_Titular": "7788994422",
                    //                 "Numero_Cuenta": 123456,
                    //                 "Clave_Interbancaria": 77889900,
                    //                 "Nombre_Banco": "Banco Credomatic"
                    //             },
                    //             "logistica": {
                    //                 "Nombre": "Ana Isabel",
                    //                 "Apellidos": "Reyes Baca",
                    //                 "Telefono": "8899889900",
                    //                 "Telefono2": "3344558899",
                    //                 "Email": "ana.reyes.baca@gmail.com",
                    //                 "Calle": "El comercio",
                    //                 "Numero_Exterior": 123,
                    //                 "Numero_Interior": 456,
                    //                 "Codigo_Postal": "01048",
                    //                 "Colonia": "La amistad",
                    //                 "Estado": "Jalisco",
                    //                 "Ciudad": "Guadalajara"
                    //             },
                    //             "prospecto": {
                    //                 "Categoria_Principal": "Valor 1",
                    //                 "Clasificacion_Principal": "Negociación",
                    //                 "Nombre_Empresa": "LA CONFIANZA",
                    //                 "Proveedor_Coppel": true,
                    //                 "Referido_Por": "Paul Kleman",
                    //                 "GMV": "GMV"
                    //             }
                    //         }
                    //     ]
                    // });

                    // var requestOptions = {
                    //     method: 'POST',
                    //     headers: myHeaders,
                    //     body: raw,
                    //     redirect: 'follow'
                    // };

                    // fetch("https://coppelmx--qa.my.salesforce.com/services/apexrest/FormularioSeller/", requestOptions)
                    //     .then(response => response.text())
                    //     .then(result => console.log(result))
                    //     .catch(error => console.log('error', error));

                    return true;
                },
                error: function (xhr, status, error) {

                    console.log("Error: try get token");
                    return false;
                }
            });

            //TODO: validate fields
            if (validate_Contact()) {

                setCookie();
                window.location = "ExperienciaVenta.html";
            }

        }

        function validate_Contact() {

            var nombres = document.getElementById("nombres");
            var apellidos = document.getElementById("apellidos");
            var celular = document.getElementById("celular");
            var correo = document.getElementById("correo");
            var nombrecomercial = document.getElementById("nombrecomercial");

            var error = 0;

            if (nombres.value.length > 0) {
                ocultarErrorEnInput($(nombres));
            } else {
                muestraErrorEnInput($(nombres), "El campo nombre es requerido.");
                error++;
            }

            if (apellidos.value.length > 0) {
                ocultarErrorEnInput($(apellidos));
            } else {
                muestraErrorEnInput($(apellidos), "El campo apellido es requerido.");
                error++;
            }

            if (celular.value.length > 0) {
                if (celular.value.length == 10) {
                    ocultarErrorEnInput($(celular));
                } else {
                    muestraErrorEnInput($(celular), "Escribe un número de teléfono válido.");
                    error++;
                }
            } else {
                muestraErrorEnInput($(celular), "El campo teléfono es requerido.");
                error++;
            }

            if (correo.value.length > 0) {
                if (isEmail(correo.value)) {
                    ocultarErrorEnInput($(correo));
                } else {
                    muestraErrorEnInput($(correo), "Escribe un correo electrónico válido.");
                    error++;
                }
            } else {
                muestraErrorEnInput($(correo), "El campo correo electronico es requerido.");
                error++;
            }

            if (nombrecomercial.value.length > 0) {
                ocultarErrorEnInput($(nombrecomercial));
            } else {
                muestraErrorEnInput($(nombrecomercial), "El campo nombre comercial en Coppel es requerido.");
                error++;
            }

            if (error > 0) {

                return false;
            }

            return true;

        }

        function getCookie(cname) {
            let name = cname + "=";
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        function checkCookie() {

            // contacto: Nombre
            let nombres = getCookie("contacto.Nombre");
            // contacto: Apellidos
            let apellidos = getCookie("contacto.Apellidos");
            // contacto: Telefono
            let celular = getCookie("contacto.Telefono");
            // contacto: Email
            let correo = getCookie("contacto.Email");
            // datosoficiales: Nombre_Tienda
            let nombre_Comercial = getCookie("datosoficiales.NombreTienda");

            if (nombres != "") {

                document.getElementById('nombres').value = nombres;
            }
            if (apellidos != "") {

                document.getElementById('apellidos').value = apellidos;
            }
            if (celular != "") {

                document.getElementById('celular').value = celular;
            }
            if (correo != "") {

                document.getElementById('correo').value = correo;
            }
            if (nombrecomercial != "") {

                document.getElementById('nombrecomercial').value = nombre_Comercial;
            }
        }

        function setCookie() {

            // contacto: Nombre
            var nombres = document.getElementById('nombres').value;
            // contacto: Apellidos
            var apellidos = document.getElementById('apellidos').value;
            // contacto: Telefono
            var celular = document.getElementById('celular').value;
            // contacto: Email
            var correo = document.getElementById('correo').value;
            // datosoficiales: Nombre_Tienda
            var nombre_Comercial = document.getElementById('nombrecomercial').value;
            // set var in cookies
            document.cookie = "contacto.Nombre" + "=" + nombres + ";";
            document.cookie = "contacto.Apellidos" + "=" + apellidos + ";";
            document.cookie = "contacto.Telefono" + "=" + celular + ";";
            document.cookie = "contacto.Email" + "=" + correo + ";";
            document.cookie = "datosoficiales.NombreTienda" + "=" + nombre_Comercial + ";";

        }

    </script>

</body>

</html>